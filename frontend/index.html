<!DOCTYPE html>
<html lang="cz">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        #err{
            color: red;
            font-size: 20px;
        }
        #registerme{
            color: blue;
            text-decoration: underline;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="loginPage">
        <div id="log">
        <h1>Login</h1>
        <form id="login" action="javascript:void(0)">
            <h1>Username</h1>
            <input type="username" id="usernamelog">
            <br>
            <h1>Password</h1>
            <input type="password" id="passwordlog">
            <br><br>
            <input type="submit">
        </form>
        <h1 id="err"></h1>
        <h1 id="registerme">Not have an account create one here</h1>
        </div>
        <div id="reg">
            <h1>Register</h1>
            <form action="#" id="register">  
                <h1>Username</h1>
                <input type="username" id="usernamereg">
                <br>
                <h1>Password</h1>
                <input type="password" id="passwordreg">
                <br><br>
                <input type="submit">
            </form>
        </div>
    </div>


    <div id="main">
        <div> 
            <h1 id="username"></h1>
            <h1 id="uid"></h1>
        </div>
    </div>

    <script>
    
    //login
        $('#reg').hide()
        $('#main').hide()
        
        $('#login').submit(function () {
            let username = $('#usernamelog').val()
            let password = $('#passwordlog').val()
            const settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://localhost:3000/log",
                "method": "POST",
                "headers": {
                    "Content-Type": "application/json"
                },
                "processData": false,
                "data": `{\n\t\"username\": \"${username}\",\n\t\"password\": \"${password}\"\n}`
                };

                $.ajax(settings).done(function (response) {
                console.log(response);
                if(response.login){
                    console.log(response.login)
                    $('#username').text(response.username)
                    $('#uid').text(response.uid)
                    $('#main').show()
                    $('#loginPage').remove()
                }if(!response.login){
                    console.log(response.login)
                    $('#err').text('Wrong username/password')
                }
                });
        })

        //login emnd

        //register
        $('#register').submit(function (params) {
            let username = $('#usernamereg').val()
            let password = $('#passwordreg').val()
            const settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://localhost:3000/reg",
                "method": "POST",
                "headers": {
                    "Content-Type": "application/json"
                },
                "processData": false,
                "data": `{\n\t\"username\": \"${username}\",\n\t\"password\": \"${password}\"\n}`
                };

                $.ajax(settings).done(function (response) {
                    console.log(response);

                });
                $('#reg').hide()
                $('#log').show()
                $('#registerme').show()
        })

        //register start


        $('#registerme').on('click', function name(params) { // schova login okno a ukaze registracni okno
            $('#log').hide()
            $('#reg').show()
            $('#registerme').hide()
        })
    </script>
</body>
</html>